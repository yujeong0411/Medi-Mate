# ğŸ¥ Medi-Mate: RAG ê¸°ë°˜ ë³µì•½ì§€ë„ AI ì±—ë´‡

> **ì‹ì•½ì²˜ APIì™€ RAG ì‹œìŠ¤í…œì„ í™œìš©í•œ ì•ˆì „í•˜ê³  ê·¼ê±° ê¸°ë°˜ì˜ ì˜ë£Œ ì •ë³´ ì œê³µ ì±—ë´‡**

<div align="center">

![React](https://img.shields.io/badge/React-61DAFB?style=for-the-badge&logo=react&logoColor=black)
![FastAPI](https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=fastapi&logoColor=white)
![OpenAI](https://img.shields.io/badge/OpenAI-412991?style=for-the-badge&logo=openai&logoColor=white)
![Railway](https://img.shields.io/badge/Railway-0B0D0E?style=for-the-badge&logo=railway&logoColor=white)
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=for-the-badge&logo=tailwind-css&logoColor=white)

[ğŸš€ Live Demo](https://medi-mate-production.up.railway.app/) â€¢ [ğŸ“– Blog Series](https://nursecoder.tistory.com)
</div>

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**Medi-Mate**ëŠ” ì‹ì•½ì²˜ ê³µì‹ ë°ì´í„°ì™€ RAG ì‹œìŠ¤í…œì„ ê²°í•©í•˜ì—¬ í™˜ìê°€ ì•ˆì „í•˜ê³  ì •í™•í•œ ë³µì•½ ì •ë³´ë¥¼ ì‰½ê²Œ ì–»ì„ ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì˜ë£Œ AI ì±—ë´‡ì…ë‹ˆë‹¤. ì˜ë£Œì§„ ìƒë‹´ì„ **ëŒ€ì²´í•˜ì§€ ì•Šê³  ë³´ì™„**í•˜ëŠ” ì—­í• ì„ í•˜ë©°, ëª¨ë“  ì‘ë‹µì— **ê³µì‹ ì¶œì²˜ì™€ ê·¼ê±°**ë¥¼ ëª…ì‹œí•©ë‹ˆë‹¤.

![ë°°í¬ì„œë²„ì‹œì—°](docs/screenshot.gif)

### âœ¨ ì£¼ìš” íŠ¹ì§•

- ğŸ” **í•˜ì´ë¸Œë¦¬ë“œ RAG ê²€ìƒ‰**: ë²¡í„° ê²€ìƒ‰ + ì‹¤ì‹œê°„ ì‹ì•½ì²˜ API ì¡°í•©
- ğŸ›¡ï¸ **ì˜ë£Œ ì•ˆì „ì„±**: ì‘ê¸‰ìƒí™© ìë™ ê°ì§€, í™˜ê° ë°©ì§€, ì˜ë£Œì§„ ìƒë‹´ ê¶Œìœ 
- ğŸ“± **PWA ì§€ì›**: ë©”ì‹ ì € ìŠ¤íƒ€ì¼ UI, ëª¨ë°”ì¼ ì•± ê°™ì€ ê²½í—˜
- ğŸ”— **ì¶œì²˜ íˆ¬ëª…ì„±**: ì‹ì•½ì²˜ ê³µì‹ ë°ì´í„° ê¸°ë°˜ ì‘ë‹µ + ìœ ì‚¬ë„ ì ìˆ˜ ì œê³µ
- âš¡ **ì‹¤ì‹œê°„ ì„±ëŠ¥**: Railway ë°°í¬ë¡œ ë¹ ë¥¸ ì‘ë‹µ ì†ë„

### ğŸ¯ ì§€ì› ê¸°ëŠ¥

- **ë³µìš©ë²• ì•ˆë‚´**: ìš©ëŸ‰, íšŸìˆ˜, ë³µìš© ì‹œê°„, ë³µìš© ë°©ë²•
- **ì•ˆì „ì„± ì •ë³´**: ê¸ˆê¸°ì‚¬í•­, ì£¼ì˜ì‚¬í•­, ì„ì‹ /ìˆ˜ìœ  ì¤‘ ë³µìš© ê°€ëŠ¥ì„±
- **ìƒí˜¸ì‘ìš©**: ì•½ë¬¼ ê°„ ë³‘ìš© ì‹œ ì£¼ì˜ì‚¬í•­
- **ë¶€ì‘ìš© ê´€ë¦¬**: ê°€ëŠ¥í•œ ë¶€ì‘ìš©ê³¼ ëŒ€ì‘ ë°©ë²•
- **ë³´ê´€ë²•**: ì˜¬ë°”ë¥¸ ì˜ì•½í’ˆ ë³´ê´€ ë°©ë²•

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë°°í¬ ì•„í‚¤í…ì²˜
![ë°°í¬ì•„í‚¤í…ì²˜](docs/deploy_architecture.png)

### ğŸ”„ RAG íŒŒì´í”„ë¼ì¸
![rag_system_ì•„í‚¤í…ì²˜](docs/rag_system_architecture.png)

1. **ë°ì´í„° ìˆ˜ì§‘**: ì‹ì•½ì²˜ ì˜ì•½í’ˆê°œìš”ì •ë³´ APIë¡œ 5,000+ ì•½ë¬¼ ë°ì´í„° ìˆ˜ì§‘
2. **ë²¡í„° ì¸ë±ì‹±**: Upstage Solar ì„ë² ë”©ìœ¼ë¡œ ë²¡í„°í™” â†’ FAISS ì €ì¥ (76MB)
3. **í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰**: ë²¡í„° ê²€ìƒ‰ + ì‹¤ì‹œê°„ API ê²€ìƒ‰ ì¡°í•©
4. **ì»¨í…ìŠ¤íŠ¸ ìƒì„±**: ê²€ìƒ‰ ê²°ê³¼ë¥¼ ì˜ë£Œ ì•ˆì „ í”„ë¡¬í”„íŠ¸ì™€ ê²°í•©
5. **AI ì‘ë‹µ ìƒì„±**: OpenAI GPT-4o-minië¡œ ê·¼ê±° ê¸°ë°˜ ë‹µë³€ ìƒì„±
6. **ì•ˆì „ì„± ê²€ì¦**: ì˜ë£Œ ë””ìŠ¤í´ë ˆì´ë¨¸ ìë™ ì¶”ê°€

## ğŸ› ï¸ ê¸°ìˆ  ìŠ¤íƒ

### Frontend
- **React 18** + **Vite**: ë¹ ë¥¸ ë¹Œë“œì™€ HMR
- **Tailwind CSS**: ëª¨ë°”ì¼ ìš°ì„  ë°˜ì‘í˜• ë””ìì¸  
- **PWA**: ì˜¤í”„ë¼ì¸ ì§€ì›, ì•± ì„¤ì¹˜ ê°€ëŠ¥

### Backend
- **FastAPI**: ê³ ì„±ëŠ¥ ë¹„ë™ê¸° ì›¹ í”„ë ˆì„ì›Œí¬
- **Python 3.12.4**: ì•ˆì •ì ì¸ ìµœì‹  ë²„ì „
- **Uvicorn**: ASGI ì„œë²„

### AI/ML Stack
- **OpenAI GPT-4o-mini**: ë¹„ìš© íš¨ìœ¨ì  ì‘ë‹µ ìƒì„±
- **Upstage Solar-1-large-passage**: í•œêµ­ì–´ íŠ¹í™” ì„ë² ë”©
- **FAISS (CPU)**: ë²¡í„° ìœ ì‚¬ë„ ê²€ìƒ‰

### Infrastructure
- **Railway**: í’€ìŠ¤íƒ ë°°í¬ í”Œë«í¼
- **Railway Volume**: ë²¡í„° DB ì˜êµ¬ ì €ì¥ (434MB)
- **Git Auto Deploy**: Push ì‹œ ìë™ ë°°í¬

## ğŸ“ ì‹¤ì œ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
Medi-Mate/
â”œâ”€â”€ backend/                     # FastAPI ë°±ì—”ë“œ
â”‚   â”œâ”€â”€ main.py                 # FastAPI ì„œë²„ + API ì—”ë“œí¬ì¸íŠ¸
â”‚   â”œâ”€â”€ rag_system.py          # RAG ì‹œìŠ¤í…œ í•µì‹¬ ë¡œì§
â”‚   â”œâ”€â”€ kfda_data_handler.py   # ì‹ì•½ì²˜ API í†µí•© í•¸ë“¤ëŸ¬
â”‚   â”œâ”€â”€ keyword_extractor.py   # AI í‚¤ì›Œë“œ ì¶”ì¶œ
â”‚   â”œâ”€â”€ common_parser.py       # ë°ì´í„° íŒŒì‹± ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ data_builder.py        # ë²¡í„° DB êµ¬ì¶• ë„êµ¬
â”‚   â”œâ”€â”€ embedder.py           # Upstage ì„ë² ë”© ë˜í¼
â”‚   â”œâ”€â”€ config.py             # í™˜ê²½ ì„¤ì •
â”‚   â”œâ”€â”€ .env                  # API í‚¤ (git ì œì™¸)
â”‚   â”œâ”€â”€ requirements.txt      # Python ì˜ì¡´ì„±
â”‚   â””â”€â”€ data/                 # Railway Volume ë§ˆìš´íŠ¸
â”‚       â”œâ”€â”€ medical_docs.index    # FAISS ì¸ë±ìŠ¤ (76MB)
â”‚       â”œâ”€â”€ documents.json        # ë©”íƒ€ë°ì´í„° (3.9MB)
â”‚       â””â”€â”€ build_progress.json   # êµ¬ì¶• ì§„í–‰ìƒí™©
â”‚
â”œâ”€â”€ medi-mate/                   # React í”„ë¡ íŠ¸ì—”ë“œ  
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ChatInterface.jsx    # ì±„íŒ… UI ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â””â”€â”€ api.js              # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ main.jsx
â”‚   â”œâ”€â”€ package.json
â”‚   â”œâ”€â”€ tailwind.config.js
â”‚   â””â”€â”€ vite.config.js
â”‚
â”œâ”€â”€ .gitignore
â””â”€â”€ README.md
```

## ğŸš€ ë¡œì»¬ ê°œë°œ í™˜ê²½ ì„¤ì •

### ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- **Node.js** 18+
- **Python** 3.11+  
- **OpenAI API í‚¤**: [platform.openai.com](https://platform.openai.com)
- **ì‹ì•½ì²˜ API í‚¤**: [ê³µê³µë°ì´í„°í¬í„¸](https://data.go.kr)ì—ì„œ ë°œê¸‰
- **Upstage API í‚¤**: [upstage.ai](https://upstage.ai)

### 1. ì €ì¥ì†Œ í´ë¡  ë° ì„¤ì •

```bash
git clone https://github.com/yujeong0411/Medi-Mate.git
cd Medi-Mate
```

### 2. ë°±ì—”ë“œ ì„¤ì •

```bash
cd backend

# ê°€ìƒí™˜ê²½ ìƒì„± (Windows)
python -m venv venv
venv\Scripts\activate

# ê°€ìƒí™˜ê²½ ìƒì„± (Mac/Linux)
python -m venv venv  
source venv/bin/activate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install -r requirements.txt

# í™˜ê²½ë³€ìˆ˜ ì„¤ì •
copy .env.example .env  # Windows
cp .env.example .env    # Mac/Linux

# .env íŒŒì¼ì— API í‚¤ ì…ë ¥
OPENAI_API_KEY=your_openai_key_here
KFDA_API_KEY=your_kfda_key_here  
UPSTAGE_API_KEY=your_upstage_key_here
```

### 3. ë²¡í„° DB êµ¬ì¶• (ìµœì´ˆ 1íšŒ)

```bash
# ë²¡í„° DB êµ¬ì¶• (10-30ë¶„ ì†Œìš”)
python data_builder.py

# êµ¬ì¶• í™•ì¸
python -c "from rag_system import get_rag_system; rag = get_rag_system(); print(f'ë¬¸ì„œ ìˆ˜: {len(rag.documents)}ê°œ')"
```

### 4. ë°±ì—”ë“œ ì„œë²„ ì‹¤í–‰

```bash
# ê°œë°œ ì„œë²„ ì‹¤í–‰
uvicorn main:app --reload --host 0.0.0.0 --port 8000

# ì„œë²„ í™•ì¸: http://localhost:8000
# API ë¬¸ì„œ: http://localhost:8000/docs
```

### 5. í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

```bash
# ìƒˆ í„°ë¯¸ë„ì—ì„œ
cd ../medi-mate

# íŒ¨í‚¤ì§€ ì„¤ì¹˜
npm install

# í™˜ê²½ë³€ìˆ˜ ì„¤ì • (.env.local)
echo "VITE_API_BASE_URL=http://localhost:8000" > .env.local

# ê°œë°œ ì„œë²„ ì‹¤í–‰  
npm run dev

# í´ë¼ì´ì–¸íŠ¸: http://localhost:5173
```

## ğŸŒ Railway ë°°í¬

### ë°°í¬ ì¤€ë¹„
```bash
# Railway CLI ì„¤ì¹˜
npm install -g @railway/cli

# Railway ë¡œê·¸ì¸
railway login

# í”„ë¡œì íŠ¸ ì—°ê²°
railway link
```

### í™˜ê²½ë³€ìˆ˜ ì„¤ì •
Railway ëŒ€ì‹œë³´ë“œì—ì„œ ë‹¤ìŒ í™˜ê²½ë³€ìˆ˜ ì¶”ê°€:
```bash
#ë²¡ì—”ë“œ
OPENAI_API_KEY=your_key
KFDA_API_KEY=your_key
UPSTAGE_API_KEY=your_key
ENVIRONMENT=production
FRONTEND_URL=https://your-domain.up.railway.app

# í”„ë¡ íŠ¸ì—”ë“œ
VITE_API_BASE_URL=https://your-production-api.com
```

### Volume ìƒì„± ë° ë²¡í„° DB êµ¬ì¶•
1. Railway ëŒ€ì‹œë³´ë“œì—ì„œ Volume ìƒì„± (`/app/data`)
2. SSH ì ‘ì†í•˜ì—¬ ë²¡í„° DB êµ¬ì¶•:
```bash
railway ssh
python data_builder.py
```

## ğŸ’Š ì‚¬ìš©ë²•

### ì§ˆë¬¸ ì˜ˆì‹œ

**ë³µìš©ë²• ë¬¸ì˜:**
- "íƒ€ì´ë ˆë†€ ëª‡ ì‹œê°„ë§ˆë‹¤ ë¨¹ì–´ì•¼ í•˜ë‚˜ìš”?"
- "ë‚™ì„¼ì • í•˜ë£¨ ìµœëŒ€ ëª‡ ë²ˆê¹Œì§€ ë¨¹ì„ ìˆ˜ ìˆë‚˜ìš”?"

**ì•ˆì „ì„± í™•ì¸:**
- "ì„ì‹  ì¤‘ì— ì• ë“œë¹Œ ë¨¹ì–´ë„ ë˜ë‚˜ìš”?"
- "ê³ í˜ˆì••ì•½ê³¼ ê°ê¸°ì•½ ê°™ì´ ë¨¹ì–´ë„ ë˜ë‚˜ìš”?"

**ë¶€ì‘ìš© ê´€ë¦¬:**  
- "íƒ€ì´ë ˆë†€ ë¨¹ê³  ì†ì´ ì•„í”ˆë° ê´œì°®ë‚˜ìš”?"
- "í•­ìƒì œ ë³µìš© ì¤‘ ìˆ  ë§ˆì…”ë„ ë˜ë‚˜ìš”?"

### ğŸ›¡ï¸ ì•ˆì „ ê¸°ëŠ¥

- **ì‘ê¸‰ìƒí™© ê°ì§€**: "ì‡¼í¬", "í˜¸í¡ê³¤ë€" ë“± í‚¤ì›Œë“œ ì‹œ 119 ì•ˆë‚´
- **ì˜ë£Œì§„ ìƒë‹´ ê¶Œìœ **: ë³µì¡í•œ ì¦ìƒì´ë‚˜ ê°œì¸ ë§ì¶¤ ì²˜ë°© í•„ìš” ì‹œ
- **ë””ìŠ¤í´ë ˆì´ë¨¸**: ëª¨ë“  ì‘ë‹µì— "ì˜ë£Œì§„ ìƒë‹´ í•„ìš”" ëª…ì‹œ

## ğŸ“Š ì‹œìŠ¤í…œ ì„±ëŠ¥

### ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ëŸ‰
- **Railway Volume**: 434MB í• ë‹¹, 80MB ì‚¬ìš©
- **ë²¡í„° ì¸ë±ìŠ¤**: 76MB (5,000+ ë¬¸ì„œ)
- **ë©”íƒ€ë°ì´í„°**: 3.9MB
- **ì‘ë‹µ ì‹œê°„**: 1-7ì´ˆ (RAG + API ê²€ìƒ‰ í¬í•¨)


## ğŸ”§ ì£¼ìš” êµ¬í˜„ íŠ¹ì§•

### ğŸ¯ í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ ì „ëµ
```python
# 1. ë²¡í„° ê²€ìƒ‰ìœ¼ë¡œ ê¸°ë³¸ ê²€ìƒ‰
vector_results = self.search_documents(query, top_k=3)

# 2. ê²°ê³¼ ë¶€ì¡± ì‹œ ì‹¤ì‹œê°„ API ê²€ìƒ‰  
if low_similarity or len(vector_results) < 2:
    api_results = self.search_with_api(query)
    
# 3. ê²°ê³¼ ì¡°í•© ë° ì¬ìˆœìœ„í™”
combined_results = self.rank_by_similarity(query, all_results)
```

### ğŸ›¡ï¸ ì˜ë£Œ ì•ˆì „ í”„ë¡¬í”„íŠ¸
```python
system_prompt = """ë‹¹ì‹ ì€ ì•½í•™ì •ë³´ ì œê³µ ì „ë¬¸ AIì…ë‹ˆë‹¤. 
1. ì œê³µëœ ë¬¸ì„œ ë‚´ìš©ì—ë§Œ ê¸°ë°˜í•˜ì—¬ ë‹µë³€
2. ëª¨ë“  ë‹µë³€ ëì— "ì˜ë£Œì§„ ìƒë‹´ í•„ìš”" ëª…ì‹œ  
3. ì§„ë‹¨ì´ë‚˜ ì²˜ë°©ì€ ì ˆëŒ€ í•˜ì§€ ë§ˆì„¸ìš”
4. ì‘ê¸‰ìƒí™© ì˜ì‹¬ ì‹œ 119 ì•ˆë‚´"""
```

### ğŸ“± ëª¨ë°”ì¼ ìµœì í™” UI
```jsx
// PWA ì§€ì›, ë©”ì‹ ì € ìŠ¤íƒ€ì¼, ì‹¤ì‹œê°„ íƒ€ì´í•‘ íš¨ê³¼
const ChatInterface = () => {
  const [messages, setMessages] = useState([]);
  const [isLoading, setIsLoading] = useState(false);
  const [loadingStage, setLoadingStage] = useState('');
  
  // ë‹¨ê³„ë³„ ë¡œë”©: "ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘..." â†’ "ë‹µë³€ ìƒì„± ì¤‘..."
};
```


## âš ï¸ ì˜ë£Œ ë©´ì±…ì¡°í•­

**ì´ ì„œë¹„ìŠ¤ëŠ” ì˜ë£Œì§„ì˜ ì§„ë‹¨, ì¹˜ë£Œ, ì²˜ë°©ì„ ëŒ€ì²´í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.** 

- ğŸš¨ **ì‘ê¸‰ìƒí™© ì‹œ**: ì¦‰ì‹œ 119 ì‹ ê³  ë˜ëŠ” ì‘ê¸‰ì‹¤ ë°©ë¬¸
- ğŸ‘¨â€âš•ï¸ **ì •í™•í•œ ì§„ë‹¨**: ë°˜ë“œì‹œ ì˜ë£Œ ì „ë¬¸ê°€ì™€ ìƒë‹´  
- ğŸ’Š **ì²˜ë°© ë³€ê²½**: ì˜ë£Œì§„ê³¼ ìƒì˜ ì—†ì´ ì„ì˜ë¡œ ë³µìš©ëŸ‰ ë³€ê²½ ê¸ˆì§€
- ğŸ¤° **íŠ¹ìˆ˜ ìƒí™©**: ì„ì‹ , ìˆ˜ìœ , ì†Œì•„ëŠ” ë°˜ë“œì‹œ ì „ë¬¸ì˜ ìƒë‹´

## ğŸ“ ë¬¸ì˜ ë° ì§€ì›

- **ê°œë°œì**: ìµœìœ ì •
- **ì´ë©”ì¼**: [choiyujeong0411@gmail.com](mailto:choiyujeong0411@gmail.com)
- **ë¸”ë¡œê·¸**: [RAG ì±—ë´‡ êµ¬ì¶•ê¸° ì‹œë¦¬ì¦ˆ](https://nursecoder.tistory.com)
- **GitHub**: [https://github.com/yujeong0411/Medi-Mate](https://github.com/yujeong0411/Medi-Mate)

---

<div align="center">

**ğŸ¥ ì•ˆì „í•œ ë³µì•½ì§€ë„, Medi-Mateê°€ í•¨ê»˜í•©ë‹ˆë‹¤ ğŸ¤–**

[![GitHub stars](https://img.shields.io/github/stars/yujeong0411/Medi-Mate?style=social)](https://github.com/yujeong0411/Medi-Mate)
[![GitHub forks](https://img.shields.io/github/forks/yujeong0411/Medi-Mate?style=social)](https://github.com/yujeong0411/Medi-Mate/fork)
</div>